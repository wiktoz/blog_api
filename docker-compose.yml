version: "3.5"
services:
    blog_api:
        # user: "${UID}:${GID}"
        build: .
        entrypoint: 
          - flask
          - run
          - --host=0.0.0.0
        environment:
          FLASK_DEBUG: 1
          FLASK_APP: ./app.py
        ports:
            - 5000:5000
        volumes:
            - .:/blog_api
    blog_webapp:
        build:
            context: ../blog_webapp
            dockerfile: ../blog_webapp/Dockerfile
        entrypoint: 
          - npm
          - run
          - dev
        ports:
            - 3000:3000
        volumes:
            - ../blog_webapp:/blog_webapp
        environment:
            TZ: Europe/Warsaw
    blog_database:
        image: mysql:5.7
        environment:
            MYSQL_ROOT_PASSWORD: root
            MYSQL_DATABASE: blog
            MYSQL_USER: blog
            MYSQL_PASSWORD: blog
        ports:
            - 3306:3306
        volumes:
            - blog_database:/var/lib/mysql